#include <iostream>
#include <cmath>

using namespace std;

// ==================== Структура Pair ====================
// first – дробное число (основание)
// second – дробное число (показатель степени)
struct Pair {
    double first; // основание степени
    double second; // показатель степени
    
    // --- Методы ---
    void init(double a, double b); // инициализация
    void read(); // ввод с клавиатуры
    void display(); // вывод на экран
    double power(); // возведение в степень
};

// ==================== Реализация методов ====================
// Инициализация значениями с контролем корректности
void Pair::init(double a, double b) {
    // Проверка корректности: ноль нельзя возводить в неположительную степень
    if (a == 0 && b <= 0) {
        cout << "Ошибка: ноль нельзя возводить в неположительную степень!" << endl;
        cout << "Инициализация значениями по умолчанию (1, 1)" << endl;
        first = 1;
        second = 1;
        return;
    }
    first = a;
    second = b;
}

// Ввод значений с клавиатуры
void Pair::read() {
    double a, b;
    cout << "Введите дробное число (основание): ";
    cin >> a;
    cout << "Введите дробное число (показатель): ";
    cin >> b;
    init(a, b); // сохраняем через init с проверкой корректности
}

// Вывод значений на экран
void Pair::display() {
    cout << "first = " << first << ", second = " << second;
}

// Возведение first в степень second с использованием pow из cmath
double Pair::power() {
    // Дополнительная проверка на корректность
    if (first == 0 && second <= 0) {
        cout << "Ошибка вычисления: ноль нельзя возводить в неположительную степень!" << endl;
        return 0;
    }
    return pow(first, second);
}

// ==================== Внешняя функция ====================
// Создание объекта Pair с проверкой корректности
Pair make_Pair(double a, double b) {
    if (a == 0 && b <= 0) {
        cout << "Ошибка: 0 нельзя возводить в неположительную степень!" << endl;
        cout << "Создание объекта с значениями по умолчанию (1, 1)" << endl;
        Pair p;
        p.init(1, 1);
        return p;
    }
    Pair p;
    p.init(a, b);
    return p;
}

// ==================== Главная функция ====================
int main() {
    cout << "=== Лабораторная работа №1. Структура-пара ===\n" << endl;

    // --- 1. Статический объект ---
    cout << "=== 1. Статический объект ===" << endl;
    Pair p1;
    p1.init(2.5, 3.7);
    p1.display();
    cout << "\nРезультат возведения в степень: " << p1.power() << endl;

    // --- 2. Ввод с клавиатуры ---
    cout << "\n=== 2. Ввод с клавиатуры ===" << endl;
    Pair p2;
    p2.read();
    p2.display();
    cout << "\nРезультат возведения в степень: " << p2.power() << endl;

    // --- 3. Внешняя функция make_Pair ---
    cout << "\n=== 3. Внешняя функция make_Pair ===" << endl;
    Pair p3 = make_Pair(5.0, -2.8);
    p3.display();
    cout << "\nРезультат возведения в степень: " << p3.power() << endl;

    // --- 4. Массив объектов ---
    cout << "\n=== 4. Массив объектов ===" << endl;
    Pair arr[3];
    
    // Инициализация элементов массива разными способами
    arr[0].init(4.0, 0.5);    // квадратный корень
    arr[1].init(0.0, 3.0);    // ноль в положительной степени
    arr[2].init(8.0, 1.0/3.0); // кубический корень
    
    for (int i = 0; i < 3; i++) {
        cout << "\nОбъект " << i + 1 << ": ";
        arr[i].display();
        cout << "\nРезультат возведения в степень: " << arr[i].power() << endl;
    }

    // --- 5. Динамический объект ---
    cout << "\n=== 5. Динамический объект ===" << endl;
    Pair* p4 = new Pair;
    p4->init(10, -3.9);
    p4->display();
    cout << "\nРезультат возведения в степень: " << p4->power() << endl;
    delete p4;

    // --- 6. Демонстрация обработки ошибок ---
    cout << "\n=== 6. Демонстрация обработки ошибок ===" << endl;
    
    // Ошибка при инициализации
    cout << "Попытка создать объект с (0, -2):" << endl;
    Pair p5;
    p5.init(0, -2);
    p5.display();
    cout << "\nРезультат возведения в степень: " << p5.power() << endl;
    
    // Ошибка при создании через make_Pair
    cout << "\nПопытка создать через make_Pair(0, 0):" << endl;
    Pair p6 = make_Pair(0, 0);
    p6.display();
    cout << "\nРезультат возведения в степень: " << p6.power() << endl;

    // --- 7. Демонстрация различных математических случаев ---
    cout << "\n=== 7. Демонстрация различных случаев ===" << endl;
    
    // Ноль в положительной степени
    Pair case1 = make_Pair(0.0, 5.0);
    cout << "Ноль в положительной степени: ";
    case1.display();
    cout << " = " << case1.power() << endl;
    
    // Единица в любой степени
    Pair case2 = make_Pair(1.0, 100.0);
    cout << "Единица в любой степени: ";
    case2.display();
    cout << " = " << case2.power() << endl;
    
    // Отрицательное основание в дробной степени
    Pair case3 = make_Pair(-8.0, 1.0/3.0);
    cout << "Отрицательное основание в дробной степени: ";
    case3.display();
    cout << " = " << case3.power() << endl;
    
    // Дробная степень
    Pair case4 = make_Pair(16.0, 0.25);
    cout << "Дробная степень: ";
    case4.display();
    cout << " = " << case4.power() << endl;

    return 0;
}
